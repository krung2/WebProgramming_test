<!doctype html>
<html lang="ko">
	<head>
	<meta charset="utf-8" />
		<link rel="stylesheet" href="../static/app.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
	</head>
	<body>
		<!-- 
		Starter Template https://getbootstrap.com/docs/4.6/examples/starter-template/
		-->
		<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
			<div class="container-fluid">
				<a class="navbar-brand" href="index.html">웹프로그래밍</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar">
					<span class="navbar-toggler-icon"></span>
				</button>
			
				<div class="collapse navbar-collapse" id="navbar">
					<ul class="navbar-nav mr-auto">
						<li class="nav-item">
							<a class="nav-link" href="/">HOME</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/register">회원가입</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/guestBook">방명록</a>
						</li>
					</ul>
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link active" href="/login">로그인</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
		<div class="text-center">
			<h3>로그인</h3>
			<div class="form-signin">
				<input type="text" name="id" class="form-control" placeholder="ID" required autofocus>
				<input type="password" name="pw" class="form-control" placeholder="비밀번호" required>
				<!-- 오류 메시지는 실제로 오류가 있을때만 표시되게 해주세요. -->
				<div class="error_message">
<!--					<p class="error">ID, 비밀번호가 올바르지 않습니다.</p>-->
				</div>
				<button class="btn btn-lg btn-primary btn-block" onclick=login()>로그인</button>
			</div>
		</div>
	</body>

	<script>

		const login = () => {
			const id = $("input[name=id]").val()
			const pw = $("input[name=pw]").val()

			$.ajax({
				url: '/login',
				method: 'POST',
				data: {
					id,
					pw,
				},

				success: function (res) {
					window.location.replace("http://10.80.161.242:5000/logged")
				},
				error: function (res) {
					$(".error_message").empty();
					$(".error_message").append(`
						<p class="error">ID, 비밀번호가 올바르지 않습니다.</p>
					`);
				}
			})

		}

	</script>
</html>
